{"version":3,"sources":["../../../../src/components/CarouselBase/CarouselViewPort.tsx"],"sourcesContent":["'use client';\n/* eslint-disable jsdoc/require-jsdoc */\n\nimport * as React from 'react';\nimport { type HasChildren, type HasRootRef } from '../../types';\nimport { type CustomTouchEvent, Touch } from '../Touch/Touch';\nimport { type BaseGalleryProps } from './types';\nimport styles from './CarouselBase.module.css';\n\ntype GalleryViewPortProps = Pick<\n  BaseGalleryProps,\n  'slideWidth' | 'slideTestId' | 'slideRoleDescription' | 'slideLabel' | 'onChange'\n> &\n  HasRootRef<HTMLElement> &\n  HasChildren & {\n    onStart: (e: CustomTouchEvent) => void;\n    onMoveX: (e: CustomTouchEvent) => void;\n    onEnd: (e: CustomTouchEvent) => void;\n    setSlideRef: (slideRef: HTMLDivElement | null, slideIndex: number) => void;\n    layerRef?: React.Ref<HTMLDivElement>;\n    slidesContainerId: string;\n  };\n\nconst defaultSlideLabel = (index: number, slidesCount: number) => `${index + 1} из ${slidesCount}`;\n\nexport const CarouselViewPort = ({\n  slideTestId,\n  slideWidth,\n  slideLabel = defaultSlideLabel,\n  slideRoleDescription = 'Слайд',\n  onChange,\n  onStart,\n  onMoveX,\n  onEnd,\n  getRootRef,\n  layerRef,\n  children,\n  setSlideRef,\n  slidesContainerId,\n}: GalleryViewPortProps) => {\n  const slidesCount = React.Children.count(children);\n\n  const onSlideFocus = React.useCallback(\n    (e: React.FocusEvent<HTMLDivElement>) => onChange?.(Number(e.currentTarget.dataset.index)),\n    [onChange],\n  );\n\n  return (\n    <Touch\n      className={styles.viewport}\n      onStartX={onStart}\n      onMoveX={onMoveX}\n      onEnd={onEnd}\n      style={{ width: slideWidth === 'custom' ? '100%' : slideWidth }}\n      noSlideClick\n      getRootRef={getRootRef}\n    >\n      <div className={styles.layer} ref={layerRef} id={slidesContainerId}>\n        {React.Children.map(children, (item: React.ReactNode, i: number) => (\n          <div\n            role=\"group\"\n            aria-roledescription={slideRoleDescription}\n            aria-label={typeof slideLabel === 'function' ? slideLabel(i, slidesCount) : slideLabel}\n            className={styles.slide}\n            key={`slide-${i}`}\n            data-testid={slideTestId?.(i)}\n            ref={(el) => setSlideRef(el, i)}\n            data-index={i}\n            tabIndex={0}\n            onFocus={onSlideFocus}\n          >\n            {item}\n          </div>\n        ))}\n      </div>\n    </Touch>\n  );\n};\n"],"names":["React","Touch","styles","defaultSlideLabel","index","slidesCount","CarouselViewPort","slideTestId","slideWidth","slideLabel","slideRoleDescription","onChange","onStart","onMoveX","onEnd","getRootRef","layerRef","children","setSlideRef","slidesContainerId","Children","count","onSlideFocus","useCallback","e","Number","currentTarget","dataset","className","viewport","onStartX","style","width","noSlideClick","div","layer","ref","id","map","item","i","role","aria-roledescription","aria-label","slide","data-testid","el","data-index","tabIndex","onFocus"],"mappings":"AAAA;;AACA,sCAAsC,GAEtC,YAAYA,WAAW,QAAQ;AAE/B,SAAgCC,KAAK,QAAQ,oBAAiB;AAE9D,OAAOC,YAAY,4BAA4B;AAgB/C,MAAMC,oBAAoB,CAACC,OAAeC,cAAwB,GAAGD,QAAQ,EAAE,IAAI,EAAEC,aAAa;AAElG,OAAO,MAAMC,mBAAmB,CAAC,EAC/BC,WAAW,EACXC,UAAU,EACVC,aAAaN,iBAAiB,EAC9BO,uBAAuB,OAAO,EAC9BC,QAAQ,EACRC,OAAO,EACPC,OAAO,EACPC,KAAK,EACLC,UAAU,EACVC,QAAQ,EACRC,QAAQ,EACRC,WAAW,EACXC,iBAAiB,EACI;IACrB,MAAMd,cAAcL,MAAMoB,QAAQ,CAACC,KAAK,CAACJ;IAEzC,MAAMK,eAAetB,MAAMuB,WAAW,CACpC,CAACC,IAAwCb,WAAWc,OAAOD,EAAEE,aAAa,CAACC,OAAO,CAACvB,KAAK,IACxF;QAACO;KAAS;IAGZ,qBACE,KAACV;QACC2B,WAAW1B,OAAO2B,QAAQ;QAC1BC,UAAUlB;QACVC,SAASA;QACTC,OAAOA;QACPiB,OAAO;YAAEC,OAAOxB,eAAe,WAAW,SAASA;QAAW;QAC9DyB,YAAY;QACZlB,YAAYA;kBAEZ,cAAA,KAACmB;YAAIN,WAAW1B,OAAOiC,KAAK;YAAEC,KAAKpB;YAAUqB,IAAIlB;sBAC9CnB,MAAMoB,QAAQ,CAACkB,GAAG,CAACrB,UAAU,CAACsB,MAAuBC,kBACpD,KAACN;oBACCO,MAAK;oBACLC,wBAAsBhC;oBACtBiC,cAAY,OAAOlC,eAAe,aAAaA,WAAW+B,GAAGnC,eAAeI;oBAC5EmB,WAAW1B,OAAO0C,KAAK;oBAEvBC,eAAatC,cAAciC;oBAC3BJ,KAAK,CAACU,KAAO5B,YAAY4B,IAAIN;oBAC7BO,cAAYP;oBACZQ,UAAU;oBACVC,SAAS3B;8BAERiB;mBAPI,CAAC,MAAM,EAAEC,GAAG;;;AAa7B,EAAE"}